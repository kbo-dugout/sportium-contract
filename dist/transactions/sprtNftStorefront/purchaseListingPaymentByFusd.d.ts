export declare const purchaseListingPaymentByFusd = "import FungibleToken from 0xFungibleToken\nimport NonFungibleToken from 0xNonFungibleToken\nimport FUSD from 0xFUSD\n\nimport Elvn from 0xElvn\nimport ElvnFUSDTreasury from 0xElvnFUSDTreasury\nimport Moments from 0xMoments\nimport SprtNFTStorefront from 0xSprtNFTStorefront\n\npub fun swapFUSDToElvn(account: AuthAccount, amount: UFix64): @FungibleToken.Vault {\n    let vaultRef = account.borrow<&FUSD.Vault>(from: /storage/fusdVault) \n        ?? panic(\"Could not borrow reference to the owner's Vault!\")\n    let fusdVault <- vaultRef.withdraw(amount: amount) as! @FUSD.Vault\n\n    return <- ElvnFUSDTreasury.swapFUSDToElvn(vault: <- fusdVault)\n}\n\ntransaction(listingResourceID: UInt64, storefrontAddress: Address) {\n    let paymentVault: @FungibleToken.Vault\n    let momentsCollection: &Moments.Collection{NonFungibleToken.Receiver}\n    let storefront: &SprtNFTStorefront.Storefront{SprtNFTStorefront.StorefrontPublic}\n    let listing: &SprtNFTStorefront.Listing{SprtNFTStorefront.ListingPublic}\n\n    prepare(account: AuthAccount) {\n        self.storefront = getAccount(storefrontAddress)\n            .getCapability<&SprtNFTStorefront.Storefront{SprtNFTStorefront.StorefrontPublic}>(\n                SprtNFTStorefront.StorefrontPublicPath\n            )\n            .borrow()\n            ?? panic(\"Could not borrow Storefront from provided address\")\n\n        self.listing = self.storefront.borrowListing(listingResourceID: listingResourceID)\n            ?? panic(\"No Listing with that ID in Storefront\")\n        \n        let listingDetails = self.listing.getDetails();\n\t\tassert(listingDetails.salePaymentVaultType == Type<@Elvn.Vault>(), message: \"Invalid salePaymentVaultType, only supported for elvn vault\")\n        let price = listingDetails.salePrice\n\n        self.paymentVault <- swapFUSDToElvn(account: account, amount: price)\n        self.momentsCollection = account.borrow<&Moments.Collection>(from: Moments.CollectionStoragePath)\n            ?? panic(\"Not found SprtNFTStorefront.Storefront PATH: \".concat(SprtNFTStorefront.StorefrontStoragePath.toString()))\n    }\n\n    execute {\n        let item <- self.listing.purchase(\n            payment: <-self.paymentVault\n        )\n\n        self.momentsCollection.deposit(token: <-item)\n\n        self.storefront.cleanup(listingResourceID: listingResourceID)\n    }\n}\n";
